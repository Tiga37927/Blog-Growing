---
title: react-demo
tags:
  - react
  - react组件
categories:
  - react
  - reactjs

date: 2017-04-17 03:36:45
---
### react学习记录
* react组件只能有一个顶层元素
* jsx实际是js对象，html标签可以抽象成js对象：标签、属性、子元素
* state的主要作用是用于组件保存、控制、修改自己的可变状态。state在组件内部初始化，可以被组件自身修改，而外部不能访问也不能修改。你可以认为state是一个局部的、只能被组件自身控制的数据源。state中状态可以通过`this.setState`方法进行更新，setState会导致组建的重新渲染。
* props的主要作用是让使用该组件的父组件可以传入参数来配置该组件。它是外部传进来的配置参数，组件内部无法控制也无法修改。除非外部组件主动传入，否则组建的props永远保持不变。
* 状态提升：当某个状态被多个组件依赖或者影响的时候，就应该把状态提升到这些组件的最近公共父组件中去管理，用props传递数据或者函数来管理这种依赖或者影响的行为。
* 最新版本，`PropTypes`不在react里，需要`npm i prop-types --save-dev`,在使用时使用import
* 高阶函数：接受或返回一个函数的函数
* context: 一个组件可以通过`getChildContext`方法返回一个对象，这个对象就是子树的`context`，提供`context`的组件必须提供`childContextTypes`作为`context`的声明和验证
* 如果一个组件设置了`context`，那么他的子组件都可以直接访问到里面的内容，他就像这个组件为根的子树的全局变量。任意深度的子组件都可以通过`contextTypes`来声明你想要的`context`里面的哪些状态，然后可以通过`this.context`访问到那些状态。
* `context`打破了组件和组件之间通过`props`传递数据的规范，极大地增强了组件之间的耦合性。而且，就如同全局变量一样，**context里面的数据能随意接触随意修改**，每个组件都能够改`context`里面的内容
* 但是这种机制对于前端应用状态管理来说很有帮助，因为毕竟很多状态都会在组件之间进行共享，context会给我们带来很大的方便。一些第三方的前端应用状态管理的库（例如redux）就是充分地利用了这种机制给我们提供便利的状态管理服务。但我们一般不需要手动写context，也不要用它，只需要用好这些第三方的应用状态管理库就行了